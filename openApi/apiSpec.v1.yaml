openapi: 3.0.0
info:
  contact:
    name: karmy
  title: apiSpec
  version: '1.0'
  description: Сервер авторизации
servers:
  - url: 'http://localhost:3000'
paths:
  /devices:
    get:
      summary: Получить список оборудования
      tags:
        - device
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    parent_id:
                      type: integer
                    category_id:
                      type: integer
                    status:
                      type: string
                    user_id:
                      type: integer
                    supplier_id:
                      type: integer
                    location_id:
                      type: integer
                    brand_id:
                      type: integer
                    model:
                      type: string
                    comments:
                      type: string
                    price:
                      type: integer
                    isArchive:
                      type: integer
                    specifications: {}
                    date_purchase:
                      type: string
                      format: date
                    date_warranty_end:
                      type: string
                      format: date
                    inv_number:
                      type: string
                    id:
                      type: integer
                  required:
                    - category_id
                    - status
                    - user_id
                    - supplier_id
                    - location_id
                    - brand_id
                    - model
                    - isArchive
                    - date_purchase
                    - date_warranty_end
                    - inv_number
      operationId: get-devices
      description: Получить список оборудования
      parameters: []
    post:
      summary: Добавить оборудование
      operationId: post-devices
      responses:
        '200':
          description: Возвращает вставленные данные
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  parent_id:
                    type: integer
                  category_id:
                    type: integer
                  status_id:
                    type: integer
                  user_id:
                    type: integer
                  supplier_id:
                    type: integer
                  location_id:
                    type: integer
                  brand_id:
                    type: integer
                  model:
                    type: string
                  comments:
                    type: string
                  price:
                    type: integer
                  isArchive:
                    type: integer
                  specifications: {}
                  date_purchase:
                    type: string
                    format: date
                  date_warranty_end:
                    type: string
                    format: date
                  inv_number:
                    type: string
                required:
                  - id
                  - category_id
                  - status_id
                  - user_id
                  - supplier_id
                  - location_id
                  - brand_id
                  - model
                  - isArchive
                  - date_purchase
                  - date_warranty_end
                  - inv_number
      tags:
        - device
      description: Добавить оборудование
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                parent_id:
                  type: integer
                  nullable: true
                category_id:
                  type: integer
                status_id:
                  type: integer
                user_id:
                  type: integer
                supplier_id:
                  type: integer
                location_id:
                  type: integer
                brand_id:
                  type: integer
                model:
                  type: string
                comments:
                  type: string
                price:
                  type: integer
                isArchive:
                  type: integer
                specifications:
                  x-json: stringify
                date_purchase:
                  type: string
                  format: date
                  x-date: toIso
                date_warranty_end:
                  type: string
                  format: date
                  x-date: toIso
                inv_number:
                  type: string
              required:
                - category_id
                - status_id
                - user_id
                - supplier_id
                - location_id
                - brand_id
                - model
                - date_purchase
                - date_warranty_end
                - inv_number
    description: ''
    patch:
      summary: Редактировать оборудование
      operationId: patch-devices
      responses:
        '200':
          description: Возвращает измененные данные
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  parent_id:
                    type: integer
                    nullable: true
                  category_id:
                    type: integer
                  status:
                    type: string
                  user_id:
                    type: integer
                  supplier_id:
                    type: integer
                  location_id:
                    type: integer
                  brand_id:
                    type: integer
                  model:
                    type: string
                  comments:
                    type: string
                  price:
                    type: integer
                  isArchive:
                    type: integer
                  specifications:
                    x-json: stringify
                  date_purchase:
                    type: string
                    format: date
                  date_warranty_end:
                    type: string
                    format: date
                required:
                  - id
      tags:
        - device
      description: Редактировать оборудование
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: integer
                parent_id:
                  type: integer
                category_id:
                  type: integer
                user_id:
                  type: integer
                supplier_id:
                  type: integer
                location_id:
                  type: integer
                brand_id:
                  type: integer
                model:
                  type: string
                comments:
                  type: string
                price:
                  type: integer
                isArchive:
                  type: integer
                specifications: {}
                date_purchase:
                  type: string
                  format: date
                  x-date: toIso
                date_warranty_end:
                  type: string
                  format: date
                  x-date: toIso
                inv_number:
                  type: string
              required:
                - id
        description: ''
      parameters:
        - schema:
            type: string
          in: query
          name: action
  /brands:
    get:
      summary: Получить данные из таблицы brand
      tags:
        - device
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    brand:
                      type: string
      operationId: get-brands
      description: 'Получает все данные из таблицы, если задан catId ответ будет содержать только колонки связанные с отправленной категорией'
      parameters:
        - schema:
            type: integer
          in: query
          name: catId
          description: ID категори
    post:
      summary: Добавить данные в таблицу brand
      operationId: post-brands
      responses:
        '200':
          description: Данные добавленной стоки
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  brand:
                    type: string
                required:
                  - id
                  - brand
      tags:
        - device
      description: Добавляет новую строку в таблицу
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                brand:
                  type: string
              required:
                - brand
        description: ''
    patch:
      summary: Редактировать данные в таблице brand
      operationId: patch-brands
      responses:
        '200':
          description: Данные измененной стоки
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  brand:
                    type: string
      tags:
        - device
      description: Редактирует запись
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: integer
                brand:
                  type: string
              required:
                - id
                - brand
        description: ''
    parameters: []
    delete:
      summary: Удлаить строку с таблицы brand
      operationId: delete-brands
      responses:
        '200':
          description: id уделенной строки
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                    description: id удаленного устройства
                required:
                  - id
      description: В бд определенны внешние ключи которые не дадут удалить запись если она связанна с каким нибудь оборудованием
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: integer
              required:
                - id
        description: ''
      tags:
        - device
  /suppliers:
    get:
      summary: Получить данные из таблицы supplier
      tags:
        - device
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    supplier:
                      type: string
      operationId: get-suppliers
      description: 'Получает все данные из таблицы, если задан catId ответ будет содержать только колонки связанные с отправленной категорией'
      parameters:
        - schema:
            type: integer
          in: query
          name: catId
          description: ID категори
    post:
      summary: Добавить данные в таблицу supplier
      operationId: post-suppliers
      responses:
        '200':
          description: Данные добавленной стоки
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  supplier:
                    type: string
                required:
                  - id
                  - supplier
      tags:
        - device
      description: Добавляет новую строку в таблицу
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                supplier:
                  type: string
              required:
                - supplier
        description: ''
    patch:
      summary: Редактировать данные в таблице supplier
      operationId: patch-suppliers
      responses:
        '200':
          description: Данные измененной стоки
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  supplier:
                    type: string
      tags:
        - device
      description: Редактирует запись
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: integer
                supplier:
                  type: string
              required:
                - id
                - supplier
        description: ''
    parameters: []
    delete:
      summary: Удлаить строку с таблицы supplier
      operationId: delete-suppliers
      responses:
        '200':
          description: id уделенной строки
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                    description: id удаленного устройства
                required:
                  - id
      description: В бд определенны внешние ключи которые не дадут удалить запись если она связанна с каким нибудь оборудованием
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: integer
              required:
                - id
      tags:
        - device
  /categories:
    get:
      summary: Получить данные из таблицы category
      tags:
        - device
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    category:
                      type: string
                    parent_id:
                      type: integer
                    schema:
                      description: Схема дополнительный полей устройст категории
                  required:
                    - id
                    - category
              examples: {}
      operationId: get-categories
      description: Получает все данные из таблицы
      parameters: []
    post:
      summary: Добавить данные в таблицу category
      operationId: post-categories
      responses:
        '200':
          description: Данные добавленной стоки
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  category:
                    type: string
                required:
                  - id
                  - category
      tags:
        - device
      description: Добавляет новую строку в таблицу
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                category:
                  type: string
                schema: {}
                parent_id:
                  type: integer
              required:
                - category
        description: ''
    patch:
      summary: Редактировать данные в таблице category
      operationId: patch-categories
      responses:
        '200':
          description: Данные измененной стоки
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  category:
                    type: string
      tags:
        - device
      description: Редактирует запись
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: integer
                category:
                  type: string
                parent_id:
                  type: integer
                schema: {}
              required:
                - id
        description: ''
    parameters: []
    delete:
      summary: Удлаить строку с таблицы category
      operationId: delete-categories
      responses:
        '200':
          description: id уделенной строки
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                    description: ''
                required:
                  - id
      description: В бд определенны внешние ключи которые не дадут удалить запись если она связанна с каким нибудь оборудованием
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: integer
              required:
                - id
      tags:
        - device
  /statuses:
    get:
      summary: Получить данные таблицы status
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    status:
                      type: string
                  required:
                    - id
                    - status
      operationId: get-statuses
      description: Получить данные с таблицы status
  /login:
    get:
      summary: Возвращает данные об авторизации
      tags:
        - authorization
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  userId:
                    type: integer
                  isAuth:
                    type: integer
                  role:
                    type: string
                required:
                  - userId
                  - isAuth
                  - role
      operationId: get-login
      description: Возвращает данные об авторизации
      security: []
    post:
      summary: Авторизация
      operationId: post-login
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  userId:
                    type: integer
                  isAuth:
                    type: integer
                  role:
                    type: string
                required:
                  - userId
                  - isAuth
                  - role
      description: Авторизация
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                login:
                  type: string
                password:
                  type: string
              required:
                - login
                - password
      tags:
        - authorization
      security: []
    delete:
      summary: Выход(logout)
      operationId: delete-login
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  userId:
                    nullable: true
                    type: integer
                  isAuth:
                    type: integer
                  role:
                    nullable: true
                    type: string
                required:
                  - userId
                  - isAuth
                  - role
      description: Выход(logout)
      tags:
        - authorization
      security: []
  /users:
    get:
      summary: Получить список пользователей
      tags:
        - users
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  employer_id:
                    type: integer
                  post_dep_loc_id:
                    type: integer
                  location_id:
                    type: integer
                  full_name:
                    type: string
                  is_archive:
                    type: integer
                  appointment_date:
                    type: string
                    format: date
                  contact: {}
                required:
                  - id
                  - post_dep_loc_id
                  - location_id
                  - full_name
                  - is_archive
      operationId: get-users
      description: Получить список пользователей
    post:
      summary: Добавление пользователя
      operationId: post-users
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  employer_id:
                    type: integer
                  post_dep_loc_id:
                    type: integer
                  location_id:
                    type: integer
                  full_name:
                    type: string
                  is_archive:
                    type: integer
                  appointment_data:
                    type: string
                    format: date
                  contact: {}
                  id:
                    type: integer
                required:
                  - post_dep_loc_id
                  - location_id
                  - full_name
                  - id
      description: Добавить пользователя
      tags:
        - users
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                employer_id:
                  type: integer
                post_dep_loc_id:
                  type: integer
                location_id:
                  type: integer
                full_name:
                  type: string
                is_archive:
                  type: integer
                appointment_data:
                  type: string
                  format: date
                contact:
                  x-json: stringify
              required:
                - post_dep_loc_id
                - location_id
                - full_name
    patch:
      summary: Редактировать пользователя
      operationId: patch-users
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  employer_id:
                    type: integer
                  post_dep_loc_id:
                    type: integer
                  location_id:
                    type: integer
                  full_name:
                    type: string
                  is_archive:
                    type: integer
                  appointment_date:
                    type: string
                    format: date
                  contact: {}
                required:
                  - id
      description: Редактировать пользователя
      tags:
        - users
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: integer
                employer_id:
                  type: integer
                post_dep_loc_id:
                  type: integer
                location_id:
                  type: integer
                full_name:
                  type: string
                is_archive:
                  type: integer
                appointment_date:
                  type: string
                  format: date
                contact:
                  x-json: stringify
              required:
                - id
  /credentials:
    post:
      summary: Добавление учетных данных
      operationId: post-credentials
      responses:
        '200':
          description: Возвращает информацию по созданному пользователю
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  login:
                    type: string
                  password:
                    type: string
                  role_id:
                    type: integer
                required:
                  - id
                  - login
                  - password
                  - role_id
      description: Добавление учетных данных и привязка к ним роли
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: integer
                login:
                  type: string
                password:
                  type: string
                role_id:
                  type: integer
              required:
                - id
                - login
                - password
                - role_id
        description: ''
      tags:
        - authorization
  /accounts:
    get:
      summary: Изменить аккаунт
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  account_name_id:
                    type: integer
                  login:
                    type: string
                  password:
                    type: string
                  comments:
                    type: string
                  is_archive:
                    type: integer
                required:
                  - id
                  - account_name_id
                  - login
                  - password
                  - is_archive
      operationId: get-account
      description: Получение списка всех аккаунтов
      tags:
        - accounts
      parameters: []
    parameters: []
    post:
      summary: Добавить аккаунт
      operationId: post-accounts
      responses:
        '200':
          description: OK
      description: Добавить аккаунт
      tags:
        - accounts
    patch:
      summary: Изменить аккаунт
      operationId: patch-accounts
      responses:
        '200':
          description: OK
      description: Изменить аккаунт
      tags:
        - accounts
  /warehouseResponsible:
    get:
      summary: Получить список ответственных за склад
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
      operationId: get-inv-warehouseResponsible
      description: Возвращает коллекцию ответственных за склад
    parameters: []
  /subDevices:
    post:
      summary: Привязка устройств к другому устройству
      operationId: post-bindDevices
      responses:
        '200':
          description: OK
      tags:
        - device
      description: Привязка устройств к другому устройству
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: integer
                ids:
                  type: array
                  items:
                    type: integer
    parameters: []
  /locations:
    get:
      summary: Получение списка локаций
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    location:
                      type: string
      operationId: get-locations
      description: Получение списка локаций
  /post_dep_loc_united:
    get:
      summary: Получает список должностей
      tags: []
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    post:
                      type: string
                    department:
                      type: string
                    location:
                      type: string
                  required:
                    - id
                    - post
                    - department
                    - location
      operationId: get-post_dep_loc_united
      description: |-
        Получает список должностей
        флаг free в query, указывает на вывод свободных вакансий
      parameters:
        - schema:
            type: string
          in: query
          name: status
          required: true
    parameters: []
  /employers:
    get:
      summary: Получить список работодателей
      tags: []
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    employer:
                      type: string
      operationId: get-employers
      description: Получить список работодателей
  /acts:
    get:
      summary: Получение актов
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    ref:
                      type: string
                    user_id:
                      type: integer
                    act_type_id:
                      type: integer
                    description: {}
                    comments:
                      type: string
                  required:
                    - id
                    - ref
                    - user_id
                    - act_type_id
                    - comments
      operationId: get-acts
      description: Получает акты
      parameters:
        - schema:
            type: string
          in: query
          name: actType
  /actFile:
    get:
      summary: Получить картинку акта
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties: {}
            multipart/form-data:
              schema:
                type: object
                properties:
                  '':
                    type: string
      operationId: get-actPictures
      parameters:
        - schema:
            type: string
          in: query
          name: id
          required: true
      description: Получить картинку акта
      tags:
        - acts
    parameters: []
  /test:
    get:
      summary: asdasdsa
      tags:
        - device
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  dd:
                    type: string
      operationId: get-test
      description: sadasd
components:
  schemas: {}
  securitySchemes: {}
tags:
  - name: device
  - name: other
  - name: authorization
  - name: users
  - name: accounts
  - name: acts
